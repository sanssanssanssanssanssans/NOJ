{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3>Create Contest</h3>
  <form method="post" class="grid-2">
    <div>
      <label>Title</label>
      <input type="text" name="title" required>
    </div>
    <div></div>
    <div>
      <label>Start (YYYY-MM-DDTHH:MM:SS)</label>
      <input type="text" name="start" placeholder="2025-09-28T19:09:09" required>
    </div>
    <div>
      <label>End (YYYY-MM-DDTHH:MM:SS)</label>
      <input type="text" name="end" placeholder="2025-09-30T20:00:00" required>
    </div>
    <div>
      <label>Penalty (min)</label>
      <input type="number" name="penalty" value="20">
    </div>
    <div>
      <label>Freeze (minutes)</label>
      <input type="number" name="freeze_min" value="0">
    </div>
    <div class="row">
      <label><input type="checkbox" name="is_private"> Private</label>
    </div>
    <div>
      <label>Whitelist (comma-separated usernames)</label>
      <input type="text" name="whitelist" placeholder="alice,bob">
    </div>
    <div class="row" style="grid-column:1/-1">
      <label>Problem IDs (comma-separated)</label>
      <input type="text" name="problem_ids" placeholder="12a524d0, b4cbfff1">
    </div>
    <div style="grid-column:1/-1">
      <button class="btn" type="submit">Create</button>
    </div>
  </form>
</div>

<div class="card">
  <h3>Problems</h3>
  <div class="table-wrap">
    <table>
      <tr><th>ID</th><th>Title</th><th>TL</th><th>ML</th></tr>
      {% for p in problems %}
      <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.title }}</td>
        <td>{{ p.time_limit }}</td>
        <td>{{ p.memory_limit }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>

<div class="card">
  <h3>Contests</h3>
  <div class="table-wrap">
    <table>
      <tr><th>ID</th><th>Title</th><th>Start</th><th>End</th><th>Private</th><th>Penalty</th><th>Problems</th><th>Actions</th></tr>
      {% for c in contests %}
      <tr>
        <td>{{ c.id }}</td>
        <td><a href="{{ url_for('contest', cid=c.id) }}">{{ c.title }}</a></td>
        <td>{{ c.start }}</td>
        <td>{{ c.end }}</td>
        <td>{{ 'Yes' if c.is_private else 'No' }}</td>
        <td>{{ c.penalty }}</td>
        <td>{{ c.problems|join(', ') }}</td>
        <td class="row">
          <a class="btn" href="{{ url_for('contests.contest_edit', cid=c.id) }}">Edit</a>
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endblock %}
